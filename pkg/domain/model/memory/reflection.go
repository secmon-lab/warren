package memory

import "github.com/secmon-lab/warren/pkg/domain/types"

// Reflection represents the result of introspection after agent task execution
// Generated by LLM to extract new insights and evaluate used memories
type Reflection struct {
	// NewClaims contains newly discovered insights from the execution
	// Each claim MUST be self-contained and understandable without the original query context
	// Format: "[Specific context/entity] [What was discovered] - [Why it matters/What problem it solves]"
	// Examples:
	// - "BigQuery table 'project.dataset.events' has field 'user_id' as INT64 type, not STRING - attempting to filter with email addresses like 'user@example.com' will cause type mismatch errors, use numeric IDs only"
	// - "Slack search requires both 'from:@username' AND 'in:#channel' syntax for filtering by user in specific channel - using only 'from:' searches all channels and may return irrelevant results"
	NewClaims []string

	// HelpfulMemories lists memory IDs that were useful during execution
	// Memories listed here will receive positive score updates
	HelpfulMemories []types.AgentMemoryID

	// HarmfulMemories lists memory IDs that were misleading or incorrect
	// Memories listed here will receive negative score updates
	HarmfulMemories []types.AgentMemoryID
}
